= My Keyboard

A example project to generate an https://github.com/oliviercailloux/SVG-keyboard[SVG keyboard]. 
Illustration with my keyboard and the https://github.com/oliviercailloux/frsci/[frsci] layout.

.What it really looks like
[#elite,link=https://spiritofgamer.com/fr/claviers/402-elite-k70rf-3700104445956.html]
image::Elite.png[Elite keyboard]

== Result
This is the resulting SVG keyboard (for extra geekism, each unicode symbol is clickable).

.The SVG keyboard with layout
[#elitesvg]
image::Elite%20K70%20French.svg[SVG keyboard]

== Instructions
=== Obtain a blank physical keyboard
Here we strive to obtain a not-yet-labeled keyboard but with the right tags and physical key shapes.

.The SVG keyboard with no labels
[#eliterectsvg]
image::src/test/resources/io/github/oliviercailloux/mykbd/Elite%20K70%20unlabeled.svg[SVG rectangular keyboard unlabeled]

. Create a json file that represents your keyboard (or a simplified version of it), row by row, following https://github.com/oliviercailloux/mykbd/blob/main/src/main/resources/io/github/oliviercailloux/mykbd/Elite%20K70.json[this example]. The key names should be X key names (look https://gitlab.freedesktop.org/xkeyboard-config/xkeyboard-config/blob/master/symbols/us#L90[here] for the names used in a standard US mapping; https://github.com/oliviercailloux/XKB-doc/blob/main/README.adoc[here] are the gory details). Consider the basic key width as the reference width and indicate widths relative to it for keys that have non normal widths. In my case, for example, the backspace key takes up two normal keys width plus the inter key width so I set it at 2.125 (17/8).
. In Java: from this file, obtain a Guava https://github.com/google/guava/wiki/IOExplained#sources-and-sinks[CharSource], use `JsonRectangularKeyboardReader` to obtain a `JsonRectangularRowKeyboard`, scale it (by indicating the real width and height of a key and of the inter-key space) to obtain a `RectangularKeyboard`, transform this to a more general `SvgKeyboard` and use a `DomHelper` to serialize the result to a file. See https://github.com/oliviercailloux/mykbd/blob/main/src/test/java/io/github/oliviercailloux/mykbd/ProducerTests.java#L44-L49[this example]. Obtain something like https://github.com/oliviercailloux/mykbd/blob/main/src/test/resources/io/github/oliviercailloux/mykbd/Rectangular%20Elite%20K70%20unlabeled.svg[this].
. Modify the resulting SVG manually (using any SVG editor) to improve the key shapes or markings, if desired. In my case only the ENTER key needed a more complex shape and I added a static Fn mark on one key (as it does not send any signal to the OS, it is not dynamically marked). Make sure you keep the `x-key-name` attributes in the SVG file.

=== X key names styled
It is now easy to label the keys, to obtain this.

.The SVG keyboard with simple labels
[#eliteXsvg]
image::src/test/resources/io/github/oliviercailloux/mykbd/Elite%20K70%20with%20X%20key%20names.svg[SVG keyboard with simple labels]

Write a method that from an X key name return a list of representations. The simplest one returns a singleton list with just the X key name. Use your `SvgKeyboard` instance and this representation method to obtain a new document, which you can again serialize to a file. See https://github.com/oliviercailloux/mykbd/blob/main/src/test/java/io/github/oliviercailloux/mykbd/ProducerTests.java#L64-L65[this example].

You can also https://github.com/oliviercailloux/mykbd/blob/main/src/test/java/io/github/oliviercailloux/mykbd/ProducerTests.java#L70-L98[obtain representers] which read from xkb configuration files. 

.The SVG keyboard with labels
[#eliteFrsvg]
image::src/test/resources/io/github/oliviercailloux/mykbd/Elite%20K70%20French.svg[SVG keyboard with labels]

Finally, you can also https://github.com/oliviercailloux/mykbd/blob/main/src/main/java/io/github/oliviercailloux/mykbd/MyKbd.java[programmatically edit] the resulting SVG document to further annotate it (as done to obtain the result here above). See the https://github.com/oliviercailloux/Keyboardd[Keyboardd] library for full flexibility.
